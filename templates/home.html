{% extends 'base.html' %}
{% load static %}
{% block content %}

{% include 'navbar.html' %}

<!----CAROSEL-------->
<article>
    <div id="demo" class="carousel slide" data-ride="carousel" style="padding-top: 10px;">
        <ul class="carousel-indicators">
            <li data-target="#demo" class="active bg-color-1" data-slide-to="0"></li>
            <li data-target="#demo" class="bg-color-2" data-slide-to="1"></li>
            <li data-target="#demo" class="bg-color-3" data-slide-to="2"></li>
            <li data-target="#demo" class="bg-color-4" data-slide-to="3"></li>
        </ul>
        <div class="carousel-inner" role="listbox">
            <!-- Slide One - Set the background image for this slide in the line below -->
            <div class="carousel-item active"
                style=" background-image: url(/static/image/robot-arm-1.png); width: 100%; height: 50%">
                <div class="carousel-caption mb-5 intro">
                    <h1 class="text-light">Welcome {{user}}</h1>
                </div>
            </div>
            <!-- Slide Two - Set the background image for this slide in the line below -->
            <div class="carousel-item"
                style=" background-image: url(/static/image/robot-arm-2.png); width: 100%; height: 50%">
                <div class="carousel-caption mb-5 intro">
                    <h1 class="color-2">Welcome {{user}}</h1>
                </div>
            </div>
            <!-- Slide Three - Set the background image for this slide in the line below -->
            <div class="carousel-item"
                style=" background-image: url(/static/image/robot-arm-3.png); width: 100%; height: 50%">
                <div class="carousel-caption mb-5 intro">
                    <h1 class="color-3">Welcome {{user}}</h1>
                </div>
            </div>
            <!-- Slide Three - Set the background image for this slide in the line below -->
            <div class="carousel-item"
                style=" background-image: url(/static/image/robot-arm-4.png); width: 100%; height: 50%">
                <div class="carousel-caption mb-5 intro">
                    <h1 class="color-4">Welcome {{user}}</h1>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#demo" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#demo" role="button" data-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</article>
<!-------------------------->

<!-- COLOR BAR -->
{% include 'color-bar.html' %}
<!-------------------------->

<!----SECTION-------->
<section class="clearfix linkSection hidden-xs" style="padding-top: 70px; padding-bottom: 20px;">
    <div class="sectionLinkArea hidden-xs scrolling">
        <div class="container">
            <div class="row">

                <div class="col-sm-12 col-lg-4 col-12">
                    <span class="sectionLink bg-color-5">
                        <i class="fas fa-pencil-ruler linkIcon border-color-5 color-5"></i>
                        <span class="linkText">
                            Innovative Engineering
                        </span>
                    </span>
                </div>

                <div class="col-sm-12 col-lg-4 col-12">
                    <span class="sectionLink bg-color-6">
                        <i class="fas fa-sitemap linkIcon border-color-6 color-6"></i>
                        <span class="linkText">Advanced Systems</span>
                    </span>
                </div>

                <div class="col-sm-12 col-lg-4 col-12">
                    <span class="sectionLink bg-color-1">
                        <i class="fas fa-laptop-code linkIcon border-color-1 color-1"></i>
                        <span class="linkText">Project Development</span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</section>
<!-------------------------->

<!-- COLOR BAR -->
{% include 'color-bar.html' %}
<!-------------------------->

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>
        {{ message }}
        </li>
        {% endfor %}
</ul>
{% endif %}

<!-------Order System------>
<section class="wrapper" style="padding-bottom: 20px;">
    <div class="container mt-3">
        <div class="info">
            <h1 class="color-3">Order System</h1>
            <p class="text-light text-center">Follow these simple steps to place your order:
                <br>Click on the letters you wish to include in your order (maximum of 4).
                <br>You can delete last chosen letter by clicking on
                <i class='fas fa-backspace'></i> button
                <br>Once you're ready with your selection, click 'Place Order button' to set your order.
            </p>
        </div>

        <form action="" method="post">
            {% csrf_token %}
            <input type="hidden" name="A" id="A" value="">
            <input type="hidden" name="B" id="B" value="">
            <input type="hidden" name="C" id="C" value="">
            <input type="hidden" name="D" id="D" value="">
            <input type="hidden" name="E" id="E" value="">
            <input type="hidden" name="F" id="F" value="">
            <input type="hidden" name="G" id="G" value="">
            <input type="hidden" name="clickData" id="clickData" value="">

            <div class="row mt-3">
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded letter p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="A">
                            <img src="{% static 'image/letter-a.png' %}" alt="Letter A" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="B">
                            <img src="{% static 'image/letter-b.png' %}" alt="Letter B" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="C">
                            <img src="{% static 'image/letter-c.png' %}" alt="Letter C" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="D">
                            <img src="{% static 'image/letter-d.png' %}" alt="Letter D" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="E">
                            <img src="{% static 'image/letter-e.png' %}" alt="Letter E" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="F">
                            <img src="{% static 'image/letter-f.png' %}" alt="Letter F" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
                <div class="col-3 d-flex justify-content-center">
                    <div class="rounded p-4"
                        style="width: 100%; background-color: rgba(255, 255, 255, 0.13); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        <div class="product-option text-center" data-char="G">
                            <img src="{% static 'image/letter-g.png' %}" alt="Letter G" style="max-width: 50px;">
                        </div>
                    </div>
                </div>
            </div>
            <div class="container mt-3">
                <div class="row">
                    <div class="col-md-3 col-0 text-center"></div>
                    <div class="col-md-2 col-sm-4 col-4 text-center">Your selction is:</div>
                    <div class="col-md-2 col-sm-4 col-4 text-center ">
                        <div id="selectedChars"
                            style="height: 35px; background-color: rgba(255, 255, 255, 0.13); border-radius: 0.25rem; backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);">
                        </div>
                    </div>
                    <div class="col-md-1 col-sm-2 col-2 text-center">
                        <button type="button" id="removeCharBtn" class="btn btn-danger bg-color-1">
                            <i class='fas fa-backspace'></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="container mt-3">
                </divclass>
                <div class="col-12 text-center">
                    <button type="submit" class="btn btn-primary bg-color-6" id="placeOrderBtn">
                        Place Order
                    </button>
                </div>
            </div>
        </form>

    </div>
</section>
<!-------------------------->

<!-- COLOR BAR -->
{% include 'color-bar.html' %}
<!-------------------------->

<!-------Order History------>
<section class="wrapper" style="padding-bottom: 20px;">
    <div class="container mt-3">
        <div class="info">
            <h1 class="color-2">Order History</h1>
            <p class="text-light text-center">
                Click on the button History to see the order status and Order history
            </p>
        </div>
    </div>
    <div class="container mt-3">
        </divclass>
        <div class="col-12 text-center">
            <a href="{% url 'order' %}" class="btn btn-link bg-color-6">
                History
            </a>
        </div>
    </div>
</section>
<!-------------------------->

{% include 'footer.html' %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        function handleClick(event) {
            var clickData = document.getElementById("clickData").value;
            if (clickData.length < 4){
                var clickedElement = event.currentTarget.getAttribute("data-char");
                clickData += clickedElement;
            }
            
            /*if (clickedElement in clickData) {
                clickData[clickedElement]++;
            } else {
                clickData[clickedElement] = 1;
            }*/

            document.getElementById('clickData').value = clickData;
            var selectedCharsContainer = document.getElementById("selectedChars");
            selectedCharsContainer.textContent = clickData;
            toggleOptionAvailability(clickData.length < 4);
        }
        function toggleOptionAvailability(enable) {
            document.querySelectorAll(".product-option").forEach(function (option) {
                option.style.pointerEvents = enable ? "auto" : "none";
                option.style.opacity = enable ? "1" : "0.5";
            });
        }

        var options = document.querySelectorAll('.product-option');
        options.forEach(function (option) {
            option.addEventListener('click', handleClick);
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        //const selectedCharsContainer = document.getElementById("selectedChars");
        const removeCharBtn = document.getElementById("removeCharBtn");
        //let selectedChars = [];

        /*document.querySelectorAll(".product-option").forEach(function (option) {
            option.addEventListener("click", function () {
                const char = option.getAttribute("data-char");
                if (selectedChars.length < 4) {
                    selectedChars.push(char);
                    updateSelectedCharsDisplay();
                    updateHiddenInputs();
                }
            });
        });*/

        removeCharBtn.addEventListener("click", function () {
            /*if (selectedChars.length > 0) {
                selectedChars.pop();
                updateSelectedCharsDisplay();
                updateHiddenInputs();
            }*/
            var chars = document.getElementById("clickData").value;
            var newchar = chars.slice(0,-1);
            console.log(newchar);
            document.getElementById("clickData").value = newchar;
            var selectedCharsContainer = document.getElementById("selectedChars");
            selectedCharsContainer.textContent = newchar;
            toggleOptionAvailability(newchar.length < 4);
        });
        function toggleOptionAvailability(enable) {
            document.querySelectorAll(".product-option").forEach(function (option) {
                option.style.pointerEvents = enable ? "auto" : "none";
                option.style.opacity = enable ? "1" : "0.5";
            });
        }

        /*function updateSelectedCharsDisplay() {
            selectedCharsContainer.textContent = selectedChars.join(" ");
            toggleOptionAvailability(selectedChars.length < 4);
        }

        

        function updateHiddenInputs() {
            // Reset hidden inputs
            ['A', 'B', 'C', 'D', 'E', 'F', 'G'].forEach(char => document.getElementById(char).value = '');
            // Update hidden inputs with selected characters
            selectedChars.forEach(char => {
                const inputField = document.getElementById(char);
                inputField.value = (parseInt(inputField.value) || 0) + 1;
            });
        }*/
    });
</script>

{% endblock content %}